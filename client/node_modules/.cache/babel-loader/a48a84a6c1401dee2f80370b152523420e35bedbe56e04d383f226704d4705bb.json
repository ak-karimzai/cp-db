{"ast":null,"code":"import FormTag from \"./forms/FormTag.vue\";\nimport TextInput from \"./forms/TextInput.vue\";\nimport { store } from './store.js';\nexport default {\n  name: \"TheLogin\",\n  components: {\n    TextInput,\n    FormTag\n  },\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      store\n    };\n  },\n  methods: {\n    submitHandler() {\n      console.log(\"submitted\");\n      const payload = {\n        username: this.username,\n        user_password: this.password\n      };\n      fetch(`${process.env.VUE_APP_SERVER_API}/users/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n      }).then(response => response.json()).then(response => {\n        if (response.error) {\n          this.$emit('error', response.error.message);\n        } else {\n          console.log(response.data);\n          this.store.token = response.data.token;\n        }\n      }).catch(err => this.$emit(\"error\", err));\n    }\n  }\n};","map":{"version":3,"names":["FormTag","TextInput","store","name","components","data","username","password","methods","submitHandler","console","log","payload","user_password","fetch","process","env","VUE_APP_SERVER_API","method","headers","body","JSON","stringify","then","response","json","error","$emit","message","token","catch","err"],"sources":["/home/khalid/uni/6thsem/cp_db/new_code/client/src/components/TheLogin.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1 class=\"mt-5\">Login</h1>\n        <hr />\n        <form-tag @myevent=\"submitHandler\" name=\"myform\" event=\"myevent\">\n          <text-input\n            v-model=\"username\"\n            label=\"Username\"\n            type=\"text\"\n            name=\"username\"\n            required=\"true\"\n          ></text-input>\n          <text-input\n            v-model=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            name=\"password\"\n            required=\"true\"\n          ></text-input>\n          <hr />\n          <input type=\"submit\" class=\"btn btn-primary\" value=\"Login\" />\n        </form-tag>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FormTag from \"./forms/FormTag.vue\";\nimport TextInput from \"./forms/TextInput.vue\";\nimport {store} from './store.js';\n\nexport default {\n  name: \"TheLogin\",\n  components: {\n    TextInput,\n    FormTag,\n  },\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      store\n    };\n  },\n  methods: {\n    submitHandler() {\n      console.log(\"submitted\");\n      const payload = {\n        username: this.username,\n        user_password: this.password,\n      };\n      fetch(`${process.env.VUE_APP_SERVER_API}/users/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      })\n        .then((response) => response.json())\n        .then((response) => {\n          if (response.error) {\n            this.$emit('error', response.error.message);\n          } else {\n            console.log(response.data);\n            this.store.token = response.data.token;\n          }\n        })\n        .catch((err) => this.$emit(\"error\", err));\n    },\n  },\n};\n</script>"],"mappings":"AA8BA,OAAOA,OAAM,MAAO,qBAAqB;AACzC,OAAOC,SAAQ,MAAO,uBAAuB;AAC7C,SAAQC,KAAK,QAAO,YAAY;AAEhC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVH,SAAS;IACTD;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZL;IACF,CAAC;EACH,CAAC;EACDM,OAAO,EAAE;IACPC,aAAaA,CAAA,EAAG;MACdC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MACxB,MAAMC,OAAM,GAAI;QACdN,QAAQ,EAAE,IAAI,CAACA,QAAQ;QACvBO,aAAa,EAAE,IAAI,CAACN;MACtB,CAAC;MACDO,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,kBAAmB,cAAa,EAAE;QACrDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,OAAO;MAC9B,CAAC,EACEW,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,EAClCF,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACE,KAAK,EAAE;UAClB,IAAI,CAACC,KAAK,CAAC,OAAO,EAAEH,QAAQ,CAACE,KAAK,CAACE,OAAO,CAAC;QAC7C,OAAO;UACLlB,OAAO,CAACC,GAAG,CAACa,QAAQ,CAACnB,IAAI,CAAC;UAC1B,IAAI,CAACH,KAAK,CAAC2B,KAAI,GAAIL,QAAQ,CAACnB,IAAI,CAACwB,KAAK;QACxC;MACF,CAAC,EACAC,KAAK,CAAEC,GAAG,IAAK,IAAI,CAACJ,KAAK,CAAC,OAAO,EAAEI,GAAG,CAAC,CAAC;IAC7C;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}